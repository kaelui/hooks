import { Canvas, Meta } from "@storybook/addon-docs/blocks";
import * as useLongPressStory from "./useLongPress.stories";

<Meta of={useLongPressStory} />

# `useLongPress`

A React hook that detects long press gestures on mouse and touch events. This hook provides event handlers for detecting when a user presses and holds on an element for a specified duration, supporting both mouse and touch interactions with customizable callbacks for different stages of the interaction.

## Features

- **Cross-platform support**: Works with both mouse and touch events
- **Configurable threshold**: Customize the duration required to trigger a long press
- **Event callbacks**: Get notified when press starts, completes, or is cancelled
- **TypeScript support**: Full type safety with proper event typing
- **Performance optimized**: Uses `useMemo` to prevent unnecessary re-renders
- **Clean event handling**: Automatic cleanup of timers and event states

## Parameters

- `callback` (function, optional): The function to execute when a long press is detected (after threshold is met)
- `options` (object, optional): Configuration options for the long press behavior
  - `threshold` (number, optional, default: 400): Duration in milliseconds to trigger long press
  - `onStart` (function, optional): Callback fired when press begins
  - `onFinish` (function, optional): Callback fired when long press completes successfully
  - `onCancel` (function, optional): Callback fired when press is cancelled before threshold

## Returns

Returns an object containing event handlers that can be spread onto any element:

- `onMouseDown`: Mouse press start handler
- `onMouseUp`: Mouse press end handler
- `onMouseLeave`: Mouse leave handler (cancels press)
- `onTouchStart`: Touch press start handler
- `onTouchEnd`: Touch press end handler

## Example Usage

### Basic Usage

```jsx
import { useLongPress } from "./useLongPress";

function BasicExample() {
  const longPressHandlers = useLongPress(() => {
    alert("Long pressed!");
  });

  return <button {...longPressHandlers}>Hold me for 400ms</button>;
}
```

### Advanced Usage with Callbacks

```jsx
import { useLongPress } from "./useLongPress";
import { useState } from "react";

function AdvancedExample() {
  const [status, setStatus] = useState("Ready");

  const longPressHandlers = useLongPress(
    () => setStatus("Long press triggered!"),
    {
      threshold: 1000,
      onStart: () => setStatus("Press started..."),
      onFinish: () => setStatus("Press completed successfully"),
      onCancel: () => setStatus("Press cancelled"),
    }
  );

  return (
    <div>
      <button {...longPressHandlers}>Hold for 1 second</button>
      <p>Status: {status}</p>
    </div>
  );
}
```

### Touch-Friendly Component

```jsx
import { useLongPress } from "./useLongPress";

function TouchExample() {
  const longPressHandlers = useLongPress(
    () => console.log("Long pressed on mobile!"),
    { threshold: 500 }
  );

  return (
    <div
      {...longPressHandlers}
      style={{
        width: 200,
        height: 200,
        backgroundColor: "#f0f0f0",
        display: "flex",
        alignItems: "center",
        justifyContent: "center",
        userSelect: "none",
      }}
    >
      Touch and hold
    </div>
  );
}
```

## Interactive Examples

<Canvas of={useLongPressStory.Primary} />

<Canvas of={useLongPressStory.WithCustomThreshold} />

<Canvas of={useLongPressStory.TouchSupport} />
